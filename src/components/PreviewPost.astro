---
import dayjs from '@libs/dayjs';

import Badge from './Badge.astro';

interface Props {
  title: string;
  date: Date;
  description: string;
  topics: string[];
  slug: string;
}

const { title, date, description, topics, slug } = Astro.props;

const formattedDate = dayjs(date).tz(dayjs.tz.guess()).format('MM/DD/YYYY');
---

<article class="post">
  <h2>{title}</h2>
  <p class="date">{formattedDate}</p>

  <p class="description">
    {description}
  </p>

  <div class="badges-container">
    {topics.map((topic) => <Badge title={topic} />)}
  </div>

  <!-- TODO: Refactor this button variant -->
  <a href={`/blog/${slug}`}>
    <button class="read-button"
      >Read more
      <svg
        width="20"
        height="20"
        viewBox="0 0 20 24"
        fill="none"
        xmlns="http://www.w3.org/2000/svg"
        class="read-arrow"
      >
        <path
          d="M19.2798 14.8688L10.8423 23.3063C10.7116 23.4374 10.5564 23.5414 10.3855 23.6124C10.2145 23.6833 10.0313 23.7199 9.84619 23.7199C9.66111 23.7199 9.47785 23.6833 9.30691 23.6124C9.13598 23.5414 8.98074 23.4374 8.8501 23.3063L0.412596 14.8688C0.148415 14.6046 -3.9366e-09 14.2463 0 13.8727C3.9366e-09 13.4991 0.148415 13.1408 0.412596 12.8766C0.676776 12.6124 1.03508 12.464 1.40869 12.464C1.7823 12.464 2.1406 12.6124 2.40478 12.8766L8.44111 18.9129V1.68636C8.44111 1.31339 8.58927 0.95571 8.85299 0.691987C9.11672 0.428264 9.4744 0.280106 9.84736 0.280106C10.2203 0.280106 10.578 0.428264 10.8417 0.691987C11.1055 0.95571 11.2536 1.31339 11.2536 1.68636V18.9129L17.2899 12.8754C17.5541 12.6112 17.9124 12.4628 18.286 12.4628C18.6596 12.4628 19.0179 12.6112 19.2821 12.8754C19.5463 13.1396 19.6947 13.4979 19.6947 13.8715C19.6947 14.2451 19.5463 14.6034 19.2821 14.8676L19.2798 14.8688Z"
          fill="white"></path>
      </svg>
    </button>
  </a>
</article>

<style>
  .post {
    display: flex;
    flex-direction: column;

    .date {
      color: var(--neutrals---black--7);
      margin-block-start: 4px;
    }

    .description {
      font-family: 'Satoshi Medium';
      margin-block: 12px;
    }

    .badges-container {
      display: flex;
      flex-wrap: wrap;
      align-items: center;
      font-family: 'Satoshi Bold';
      gap: 0.8rem;
    }

    .badge {
      background-color: var(--primary---green--6--alpha);
      border-radius: 20px;
      padding-block: 8px;
      padding-inline: 12px;
    }

    .read-button {
      color: var(--neutrals---black--1);
      cursor: pointer;
      font-family: 'Satoshi Bold';
      background-color: transparent;
      border: none;
      display: flex;
      flex-direction: row;
      gap: 4px;
      align-items: center;
      max-width: 160px;
      margin-block-start: 24px;

      .read-arrow {
        rotate: 225deg;
        transition: transform 0.2s ease;
      }

      &:hover .read-arrow {
        transform: translateY(4px);
      }
    }
  }
</style>
